# ========================================
# NOTIFICATION SERVICE CONFIGURATION
# ========================================

# Application Configuration
spring.application.name=notification-service
server.port=8083

# ========================================
# DATABASE CONFIGURATION
# ========================================
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ========================================
# JPA/HIBERNATE CONFIGURATION  
# ========================================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ========================================
# GRAPHQL CONFIGURATION
# ========================================
spring.graphql.schema.locations=classpath:/graphql/
spring.graphql.path=/graphql
spring.graphql.graphiql.enabled=true
spring.graphql.graphiql.path=/graphiql

# ========================================
# MICROSERVICES COMMUNICATION
# ========================================
# URLs de otros microservicios
services.supplier-service.url=http://localhost:8082
services.auth-service.url=http://localhost:8081

# ========================================
# NOTIFICATION CONFIGURATION
# ========================================
# Días de alerta para notificaciones
notifications.dias-alerta=7,3,1,0,-1,-7
notifications.max-intentos=3
notifications.intervalo-reintento=30

# Scheduler configuration
notifications.scheduler.enabled=true
notifications.scheduler.cron=0 0 8 * * ?

# ========================================
# EMAIL CONFIGURATION (BREVO)
# ========================================
# Brevo API configuration
brevo.api.key=${BREVO_API_KEY}
brevo.api.url=https://api.brevo.com/v3/smtp/email

# Email sender configuration
brevo.sender.email=${SENDER_EMAIL:notificaciones@petmanager.com}
brevo.sender.name=${SENDER_NAME:PetManager Notificaciones}

# Spring Mail configuration (backup/alternative)
spring.mail.host=smtp-relay.brevo.com
spring.mail.port=587
spring.mail.username=${BREVO_USERNAME}
spring.mail.password=${BREVO_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ========================================
# ACTUATOR CONFIGURATION
# ========================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# ========================================
# LOGGING CONFIGURATION
# ========================================
logging.level.com.petmanager.notification_service=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.springframework.mail=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ========================================
# FEIGN CLIENT CONFIGURATION
# ========================================
# Timeouts para comunicación con supplier-service
feign.client.config.default.connect-timeout=5000
feign.client.config.default.read-timeout=10000